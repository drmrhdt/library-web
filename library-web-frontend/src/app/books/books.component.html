<input type="file"
       (change)="onChange($event)"
       #inputFile>

<table>
    <thead>
        <tr>
            <th>Название</th>
            <th>Автор</th>
            <th>Описание</th>
            <th>Хранилище</th>
            <th>Полка</th>
            <th>Ряд</th>
            <th>Номер</th>
            <th>Статус</th>
            <th>Теги</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let book of books$ | async">
            <td>{{book?.name}}</td>
            <td>{{book?.author}}</td>
            <td>{{book?.description}}</td>
            <td [routerLink]="['..', 'vault', book?.vault?.id]">
                {{book?.vault?.name || '-'}}
            </td>
            <td>{{book?.shelf}}</td>
            <td>{{book?.row}}</td>
            <td>{{book?.number}}</td>
            <td>{{book?.status}}</td>
            <td>
                <span *ngFor="let tag of book.tags; let lastTag = last">
                    {{tag.name}}{{lastTag ? '' : ','}}
                </span>
            </td>
            <td>
                <i class="icon icon-pencil"
                   (click)="toggleEditDialog(book)"
                   [title]="'Редактировать'">
                </i>
                <i class="icon icon-bin"
                   (click)="toggleDeletingDialog(book)"
                   [title]="'Удалить'">
                </i>
            </td>
        </tr>
    </tbody>
</table>

<app-modal *ngIf="isUpdatingDialogOpened"
           [isShowCloseBtn]="true"
           [modalTitle]="'Редактирование книги'"
           [bodyComponent]="editBook"
           (close)="toggleEditDialog()">
    <ng-template #editBook>
        <app-book-form [book]="book"
                       (success)="toggleEditDialog()">
        </app-book-form>
    </ng-template>
</app-modal>

<app-modal *ngIf="isDeletingDialogOpened"
           [isShowCloseBtn]="true"
           [modalTitle]="'Удаление книги'"
           [bodyComponent]="deletingBook"
           [confirmText]="'Удалить'"
           [isShowConfirmBtn]="true"
           (close)="toggleDeletingDialog()"
           (confirm)="deleteBook()">
    <ng-template #deletingBook>
        Вы уверены, что хотите удалить книгу "{{book?.name}}"?
    </ng-template>
</app-modal>